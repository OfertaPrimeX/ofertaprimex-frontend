<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>OfertaPrimeX â€” Dashboard Debug</title>
<style>
body {
  font-family: Arial;
  background: #0f172a;
  color: #e5e7eb;
  padding: 20px;
}
h1 { color: #38bdf8; }
button {
  margin: 5px;
  padding: 8px 12px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  background: #2563eb;
  color: white;
}
button.danger { background: #b91c1c; }
input {
  padding: 6px;
  margin: 5px;
}
pre {
  background: #020617;
  padding: 15px;
  margin-top: 15px;
  max-height: 400px;
  overflow: auto;
}
.card {
  background: #020617;
  padding: 15px;
  margin-bottom: 10px;
  border-radius: 8px;
}
</style>
</head>

<body>

<h1>ðŸ“Š Dashboard Debug â€” OfertaPrimeX</h1>

<div class="card">
  <button onclick="callApi('/debug/dashboard')">Resumo Geral</button>
</div>

<div class="card">
  <h3>ðŸ“¦ Produtos</h3>
  <input type="date" id="prodIni">
  <input type="date" id="prodFim">
  <button onclick="listarProdutos()">Listar</button>
</div>

<div class="card">
  <h3>ðŸ”‘ Tokens Mercado Livre</h3>
  <input type="date" id="tokIni">
  <input type="date" id="tokFim">
  <button onclick="listarTokens()">Listar</button>
</div>

<pre id="output">Resultado...</pre>

<script>
const BASE_URL = 'https://yo0g0cg4c88w88osc4s04c0c.72.61.33.248.sslip.io';

async function callApi(endpoint) {
  const res = await fetch(BASE_URL + endpoint);
  const data = await res.json();
  output(data);
}

function listarProdutos() {
  const ini = document.getElementById('prodIni').value;
  const fim = document.getElementById('prodFim').value;
  let url = '/debug/produtos?';
  if (ini) url += `data_inicio=${ini}&`;
  if (fim) url += `data_fim=${fim}`;
  callApi(url);
}

function listarTokens() {
  const ini = document.getElementById('tokIni').value;
  const fim = document.getElementById('tokFim').value;
  let url = '/debug/meli/tokens-full?';
  if (ini) url += `data_inicio=${ini}&`;
  if (fim) url += `data_fim=${fim}`;
  callApi(url);
}

function output(data) {
  document.getElementById('output').textContent =
    JSON.stringify(data, null, 2);
}
</script>

</body>
</html>
